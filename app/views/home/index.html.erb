<main class="max-w-screen-lg p-2 mx-auto">    
  <section class="home-img">
    <div class="w-full home-slide-height">
      <div class="h-full swiper mySwiperTop md:w-auto" data-controller="swiper-carousel-top">
        <div class="h-full swiper-wrapper">
          <% @restaurants.each do |restaurant| %>
            <% restaurant.images.sample(1).each do |image| %>
              <div class="swiper-slide">
                <%= image_tag (image.url) ,class:"object-cover w-full h-full" %>
              </div>
            <% end %>
          <% end %>
        </div>
        <div class="swiper-button-next swiper-button-next-top"></div>
        <div class="swiper-button-prev swiper-button-prev-top"></div>
        <div class="swiper-pagination swiper-pagination-top"></div>
      </div> 
    </div>
  
    <div class="" data-controller="home-tag">
      <%= form_with(url: root_path, method: :get, class: "pb-4 mt-4" )do |form| %>
        <%= form.label :搜尋餐廳, class: "text-lg font-bold hidden md:inline-block" %>
        <%= form.text_field :search, placeholder: "輸入搜尋餐廳", class: "input-border-click py-1.5 w-full md:w-1/3" %>
        <%= form.submit "搜尋", name: nil, class: "mt-4 major-btn cursor-pointer px-6 py-2" %>
        <button class="">
          <%= link_to "所有餐廳", root_path, class: "px-6 py-2 text-major border-2 border-major rounded text-sm p-1 hover:bg-major hover:text-white" %>
        </button>
        
        <button class="px-6 py-2 major-btn" data-action="click->home-tag#setTagSection">標籤搜尋</button>

        <div class="hidden py-4 my-4 border-t-2 border-b-2" data-home-tag-target="tagSection">
          <% @tags.each do |tag| %>
            <span>
              <%= link_to tag.name, root_path(query: tag.name), class: "y-1 px-5 text-sm m-1 border hover:bg-major hover:text-white cursor-pointer inline-block rounded-xl bg-gray-100" %>
            </span>
          <% end %>
        </div>

      <% end %>
    </div>

    <div class="grid grid-cols-2 gap-4">
      <div>
        <h4 class="mb-4 text-lg font-bold">用餐人數</h4>
      
        <div class="flex">
          <select class="w-full mr-4 input-border-click">
            <option value="">大人人數</option>
          </select>
          <select class="w-full input-border-click">
            <option value="">小孩人數</option>
          </select>
        </div>
      </div>

      <div>
        <h4 class="mb-4 text-lg font-bold">用餐日期</h4>
        <div>
          <input type="date" class="w-full date input-border-click">
        </div>
      </div>
    </div>
  </section>
  
  <section>
    <div>
      <% @restaurants.each do |restaurant| %>
        
        <div class="flex flex-col pb-5 mb-4 border-b-2 rounded shadow-lg md:flex-row md:pt-5 md:pl-5">
          <div class="w-full mr-6 rounded md:w-1/4 h-1/4">
            <% if restaurant.images[0] %>
              <%= image_tag restaurant.images[0], class: "w-full object-cover" %>
            <% end %>
          </div>
          <div class="p-4 txt">
            <h2><%= link_to restaurant.title, restaurant_path(restaurant), class: "mb-3 text-2xl" %></h2>
            <p class="my-3 text-gray-500"><%= restaurant.address %></p>
            <%= restaurant.branch %></p>
           
            <div class="mt-4">
              <% restaurant.tags.each do |tag| %>
               <span>
                 <%= link_to "##{tag.name}", root_path(query: tag.name), class: "py-1 px-5 text-xs m-1 border hover:bg-major hover:text-white cursor-pointer inline-block rounded-xl bg-gray-100" %>
               </span>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </section>

</main>